<html>
<head>
	<style>
	*{padding: 0; margin:0;}
	canvas{ background: #eee; display: block; margin: 0 auto;}
	</style>
</head>

<body>
<canvas id= "myCanvas" width="936" height="600"></canvas>
<script type="text/javascript">
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
document.addEventListener("keydown", keyDownHandler, false);
document.addEventListener("keyup", keyUpHandler, false);
var tank1 = new Image();
tank1.src = "tank1.png";
var player1X = 200;
var player1Y = 200;
var player1Rotation = 0
var player1W = 30;
var player1H = 40;
var canMove = true;
var upPressed = false;
var downPressed = false;
var leftPressed = false;
var rightPressed = false;

function keyDownHandler(e){
	if(e.keyCode == 38)
	{
		upPressed = true;
		downPressed = false;
	}
	if(e.keyCode == 40)
	{
		downPressed = true;
		upPressed = false;
	}
	if(e.keyCode == 37)
	{
		leftPressed = true;
		rightPressed = false;
	}
	if(e.keyCode == 39)
	{
		rightPressed = true;
		leftPressed = false;
	}
	}
	
function keyUpHandler(e)
{
	if(e.keyCode == 38)
	{
		upPressed = false;
	}
	if(e.keyCode == 40)
	{
		downPressed = false;
	}
	if(e.keyCode == 37)
	{
		leftPressed = false;
	}
	if(e.keyCode == 39)
	{
		rightPressed = false;
	}
}

function drawImageRot(img,x,y,width,height,deg)
{
	var rad = deg * Math.PI / 180;
	ctx.translate(x + width / 2, y + height / 2);
	ctx.rotate(rad);
	ctx.drawImage(img,width / 2 * (-1),height / 2 * (-1),width,height);
	ctx.rotate(rad * (-1));
	ctx.translate((x + width / 2) * (-1), (y + height / 2) * (-1));
}

function direction()
{
	
}

function movement()
{
	if(leftPressed)
	{
		player1Rotation -= 1.4;
	}
	if (rightPressed)
	{
		player1Rotation += 1.4;
	}
	if (upPressed)
	{
		player1X += Math.cos((90 + player1Rotation) * Math.PI / 180);
		player1Y += Math.sin((90 + player1Rotation) * Math.PI / 180);
	}
	if (downPressed)
	{
		player1X -= Math.cos((90 + player1Rotation) * Math.PI / 180);
		player1Y -= Math.sin((90 + player1Rotation) * Math.PI / 180);
	}
}


function draw()
{
	ctx.clearRect(0,0,800,600);
	drawImageRot(tank1, player1X, player1Y, player1W, player1H, player1Rotation);
	movement();
}
setInterval(draw, 10);
</script>
</body>
</html>